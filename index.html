<html>
    <head>
        <script src="https://cdn.rawgit.com/BrainJS/brain.js/45ce6ffc/browser.js"></script>
        <script src="./mnist/dist/mnist.js"></script>
    </head>
    <body>
    	<canvas id="mnistCanvas" width="28" height="28">
        	Your browser does not support the HTML5 canvas tag.
    	</canvas>
        <script>

            var set = mnist.set(1000);

            var trainingSet = set.training;

            //console.log(trainingSet);

            const net = new brain.NeuralNetwork();
            net.train(trainingSet);

            function chooseBest(digit) {
                const result = net.run(digit);
                let maiorValor = 0;
                let choosed = '';
                for (let name in result) {
                   if (result[name] > maiorValor) {
                        maiorValor = result[name];
                        choosed = name;
                    }
                }
                
                return choosed;
            }

            function getRandomIntInclusive(min, max) {
              min = Math.ceil(min);
              max = Math.floor(max);
              return Math.floor(Math.random() * (max - min + 1)) + min;
            }

            function test() {

                console.log("Teste:");

                var digits = mnist[getRandomIntInclusive(0,9)].range(0, 9);
                var digit = digits[getRandomIntInclusive(0,9)];

                var context = document.getElementById('mnistCanvas').getContext('2d');

                mnist.draw(digit, context);

                console.log(chooseBest(digit));
            }

        </script>
    </body>
</html>
